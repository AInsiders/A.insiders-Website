<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puzzle Cipher Tool - A.insiders</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3498db, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .cipher-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .cipher-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: 2px solid #dee2e6;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .cipher-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .cipher-card:hover::before {
            left: 100%;
        }

        .cipher-card:hover {
            border-color: #3498db;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(52, 152, 219, 0.3);
        }

        .cipher-card.active {
            border-color: #3498db;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .cipher-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            display: block;
        }

        .cipher-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .cipher-description {
            font-size: 0.9em;
            color: #6c757d;
            line-height: 1.4;
        }

        .cipher-difficulty {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .tabs {
            display: flex;
            margin-bottom: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 5px;
        }

        .tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #6c757d;
        }

        .tab.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .tab:hover:not(.active) {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .form-control {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
            font-family: 'Courier New', monospace;
        }

        .form-control:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(231, 76, 60, 0.3);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s ease;
        }

        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: 600;
        }

        .status.success {
            background: rgba(39, 174, 96, 0.1);
            color: #27ae60;
            border: 1px solid rgba(39, 174, 96, 0.3);
        }

        .status.error {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
            border: 1px solid rgba(231, 76, 60, 0.3);
        }

        .status.info {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
            border: 1px solid rgba(52, 152, 219, 0.3);
        }

        .info-box {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 4px solid #3498db;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .info-box h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #6c757d;
            line-height: 1.6;
        }

        .cipher-info {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .cipher-info h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .cipher-info ul {
            color: #856404;
            padding-left: 20px;
        }

        .cipher-info li {
            margin-bottom: 5px;
        }

        .grid-display {
            display: grid;
            gap: 2px;
            margin: 15px 0;
            max-width: 400px;
        }

        .grid-cell {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .grid-cell:hover {
            background: #e3f2fd;
        }

        .grid-cell.selected {
            background: #3498db;
            color: white;
        }

        .tap-code-display {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin: 15px 0;
            max-width: 300px;
        }

        .tap-cell {
            width: 50px;
            height: 50px;
            border: 2px solid #3498db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tap-cell:hover {
            background: #e3f2fd;
            transform: scale(1.05);
        }

        .tap-cell.active {
            background: #3498db;
            color: white;
            transform: scale(1.1);
        }

        .dancing-men {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .dancing-man {
            width: 60px;
            height: 80px;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .dancing-man:hover {
            border-color: #3498db;
            transform: scale(1.05);
        }

        .dancing-man.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .sudoku-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 1px;
            margin: 15px 0;
            max-width: 450px;
            border: 2px solid #333;
        }

        .sudoku-cell {
            width: 45px;
            height: 45px;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .sudoku-cell:hover {
            background: #e3f2fd;
        }

        .sudoku-cell.selected {
            background: #3498db;
            color: white;
        }

        .sudoku-cell.fixed {
            background: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
        }

        .calendar-display {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            margin: 15px 0;
            max-width: 350px;
        }

        .calendar-day {
            width: 45px;
            height: 45px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calendar-day:hover {
            background: #e3f2fd;
        }

        .calendar-day.selected {
            background: #3498db;
            color: white;
        }

        .calendar-day.weekend {
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .main-content {
                padding: 20px;
            }

            .header h1 {
                font-size: 2em;
            }

            .cipher-selector {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                margin-bottom: 5px;
            }

            .grid-display, .tap-code-display, .dancing-men, .sudoku-grid, .calendar-display {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† Puzzle Cipher Tool</h1>
            <p>Classic puzzle-based ciphers and code-style encryption methods</p>
        </div>

        <div class="main-content">
            <!-- Cipher Selector -->
            <div class="cipher-selector">
                <div class="cipher-card" data-cipher="book">
                    <div class="cipher-icon">üìö</div>
                    <div class="cipher-title">Book Cipher</div>
                    <div class="cipher-description">Encode messages using page, line, and word positions in a book</div>
                    <div class="cipher-difficulty difficulty-medium">Medium</div>
                </div>
                
                <div class="cipher-card" data-cipher="grid">
                    <div class="cipher-icon">üî≤</div>
                    <div class="cipher-title">Grid Cipher</div>
                    <div class="cipher-description">Hide messages in grid patterns and coordinates</div>
                    <div class="cipher-difficulty difficulty-easy">Easy</div>
                </div>
                
                <div class="cipher-card" data-cipher="tap">
                    <div class="cipher-icon">üëÜ</div>
                    <div class="cipher-title">Tap Code</div>
                    <div class="cipher-description">Prison communication using tap patterns on surfaces</div>
                    <div class="cipher-difficulty difficulty-easy">Easy</div>
                </div>
                
                <div class="cipher-card" data-cipher="adfgvx">
                    <div class="cipher-icon">‚öîÔ∏è</div>
                    <div class="cipher-title">ADFGVX Cipher</div>
                    <div class="cipher-description">World War I German military cipher using 6 letters</div>
                    <div class="cipher-difficulty difficulty-hard">Hard</div>
                </div>
                
                <div class="cipher-card" data-cipher="dancing">
                    <div class="cipher-icon">üï∫</div>
                    <div class="cipher-title">Dancing Men</div>
                    <div class="cipher-description">Sherlock Holmes cipher using stick figure symbols</div>
                    <div class="cipher-difficulty difficulty-medium">Medium</div>
                </div>
                
                <div class="cipher-card" data-cipher="sudoku">
                    <div class="cipher-icon">üß©</div>
                    <div class="cipher-title">Sudoku Cipher</div>
                    <div class="cipher-description">Hide messages in Sudoku puzzle patterns</div>
                    <div class="cipher-difficulty difficulty-hard">Hard</div>
                </div>
                
                <div class="cipher-card" data-cipher="calendar">
                    <div class="cipher-icon">üìÖ</div>
                    <div class="cipher-title">Calendar Cipher</div>
                    <div class="cipher-description">Encode messages using calendar dates and patterns</div>
                    <div class="cipher-difficulty difficulty-medium">Medium</div>
                </div>
            </div>

            <!-- Cipher Info -->
            <div class="cipher-info" id="cipherInfo" style="display: none;">
                <h3 id="cipherInfoTitle">Cipher Information</h3>
                <div id="cipherInfoContent"></div>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab active" onclick="switchTab('encode')">üîí Encode</button>
                <button class="tab" onclick="switchTab('decode')">üîì Decode</button>
                <button class="tab" onclick="switchTab('info')">‚ÑπÔ∏è Information</button>
            </div>

            <!-- Encode Tab -->
            <div id="encode" class="tab-content active">
                <div class="info-box">
                    <h3>üìù How to Encode a Message</h3>
                    <p>1. Select a cipher method above<br>
                    2. Enter your secret message<br>
                    3. Configure cipher-specific settings<br>
                    4. Click "Encode Message" to create the cipher</p>
                </div>

                <div id="encodeContent">
                    <!-- Content will be dynamically loaded based on cipher -->
                </div>
            </div>

            <!-- Decode Tab -->
            <div id="decode" class="tab-content">
                <div class="info-box">
                    <h3>üîç How to Decode a Message</h3>
                    <p>1. Select the same cipher method used for encoding<br>
                    2. Enter the encoded message or cipher data<br>
                    3. Configure the same settings used for encoding<br>
                    4. Click "Decode Message" to reveal the original text</p>
                </div>

                <div id="decodeContent">
                    <!-- Content will be dynamically loaded based on cipher -->
                </div>
            </div>

            <!-- Info Tab -->
            <div id="info" class="tab-content">
                <div class="cipher-info">
                    <h3>üß† Puzzle Cipher Features</h3>
                    <ul>
                        <li><strong>Classic Methods:</strong> Historical and proven cipher techniques</li>
                        <li><strong>Visual Elements:</strong> Interactive grids, patterns, and symbols</li>
                        <li><strong>Multiple Difficulty Levels:</strong> From easy to advanced complexity</li>
                        <li><strong>Educational Value:</strong> Learn about historical cryptography</li>
                        <li><strong>Creative Encoding:</strong> Unique and memorable cipher methods</li>
                    </ul>
                </div>

                <div class="info-box">
                    <h3>üìö Available Ciphers</h3>
                    <ul>
                        <li><strong>Book Cipher:</strong> Use book positions to encode messages</li>
                        <li><strong>Grid Cipher:</strong> Hide data in coordinate systems</li>
                        <li><strong>Tap Code:</strong> Prison communication method</li>
                        <li><strong>ADFGVX:</strong> WWI German military cipher</li>
                        <li><strong>Dancing Men:</strong> Sherlock Holmes stick figure cipher</li>
                        <li><strong>Sudoku:</strong> Puzzle-based message hiding</li>
                        <li><strong>Calendar:</strong> Date-based encoding system</li>
                    </ul>
                </div>

                <div class="info-box">
                    <h3>‚ö†Ô∏è Important Notes</h3>
                    <ul>
                        <li>These are primarily educational and recreational ciphers</li>
                        <li>Not suitable for high-security applications</li>
                        <li>Some methods require shared knowledge between parties</li>
                        <li>Test decoding before sharing encoded messages</li>
                        <li>Keep cipher keys and settings secure</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentCipher = null;
        let currentTab = 'encode';
        let encodedData = null;

        // Cipher information
        const cipherInfo = {
            book: {
                title: "Book Cipher",
                description: "Encode messages using page, line, and word positions in a book",
                features: [
                    "Uses book page, line, and word numbers",
                    "Requires same book for encoding/decoding",
                    "High security with large books",
                    "Historical method used by spies"
                ],
                encodeFields: `
                    <div class="form-group">
                        <label for="encodeMessage">Secret Message:</label>
                        <textarea id="encodeMessage" class="form-control" rows="4" placeholder="Enter your secret message here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="bookTitle">Book Title (for reference):</label>
                        <input type="text" id="bookTitle" class="form-control" placeholder="e.g., War and Peace, Bible, etc.">
                    </div>
                    <div class="form-group">
                        <label for="bookText">Book Text (first few pages):</label>
                        <textarea id="bookText" class="form-control" rows="8" placeholder="Paste the book text you want to use for encoding..."></textarea>
                    </div>
                    <div class="progress-bar" id="encodeProgress" style="display: none;">
                        <div class="progress-fill" id="encodeProgressFill"></div>
                    </div>
                    <div id="encodeStatus"></div>
                    <button class="btn btn-primary" onclick="encodeMessage()">üîí Encode Message</button>
                    <button class="btn btn-danger" onclick="clearEncode()">üóëÔ∏è Clear</button>
                    <div id="encodeDownload" style="display: none;">
                        <h3>‚úÖ Message Encoded Successfully!</h3>
                        <div class="form-group">
                            <label for="encodedResult">Book Cipher Coordinates:</label>
                            <textarea id="encodedResult" class="form-control" rows="6" readonly></textarea>
                        </div>
                        <button class="btn btn-success" onclick="copyEncodedResult()">üìã Copy Coordinates</button>
                    </div>
                `,
                decodeFields: `
                    <div class="form-group">
                        <label for="decodeCoordinates">Book Cipher Coordinates:</label>
                        <textarea id="decodeCoordinates" class="form-control" rows="6" placeholder="Enter the coordinate pairs (page.line.word)..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="decodeBookText">Book Text:</label>
                        <textarea id="decodeBookText" class="form-control" rows="8" placeholder="Paste the same book text used for encoding..."></textarea>
                    </div>
                    <div class="progress-bar" id="decodeProgress" style="display: none;">
                        <div class="progress-fill" id="decodeProgressFill"></div>
                    </div>
                    <div id="decodeStatus"></div>
                    <button class="btn btn-primary" onclick="decodeMessage()">üîì Decode Message</button>
                    <button class="btn btn-danger" onclick="clearDecode()">üóëÔ∏è Clear</button>
                    <div id="decodeResult" style="display: none;">
                        <h3>‚úÖ Message Decoded Successfully!</h3>
                        <div class="form-group">
                            <label for="decodedMessage">Original Message:</label>
                            <textarea id="decodedMessage" class="form-control" rows="4" readonly></textarea>
                        </div>
                        <button class="btn btn-success" onclick="copyDecodedMessage()">üìã Copy Message</button>
                    </div>
                `
            },
            grid: {
                title: "Grid Cipher",
                description: "Hide messages in grid patterns and coordinates",
                features: [
                    "Uses grid coordinates for encoding",
                    "Visual grid interface",
                    "Customizable grid sizes",
                    "Pattern-based encoding"
                ],
                encodeFields: `
                    <div class="form-group">
                        <label for="encodeMessage">Secret Message:</label>
                        <textarea id="encodeMessage" class="form-control" rows="4" placeholder="Enter your secret message here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Grid Size:</label>
                        <select id="gridSize" class="form-control">
                            <option value="5x5">5x5 Grid</option>
                            <option value="6x6">6x6 Grid</option>
                            <option value="8x8">8x8 Grid</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Grid Pattern:</label>
                        <div id="gridDisplay" class="grid-display"></div>
                    </div>
                    <div class="progress-bar" id="encodeProgress" style="display: none;">
                        <div class="progress-fill" id="encodeProgressFill"></div>
                    </div>
                    <div id="encodeStatus"></div>
                    <button class="btn btn-primary" onclick="encodeMessage()">üîí Encode Message</button>
                    <button class="btn btn-danger" onclick="clearEncode()">üóëÔ∏è Clear</button>
                    <div id="encodeDownload" style="display: none;">
                        <h3>‚úÖ Message Encoded Successfully!</h3>
                        <div class="form-group">
                            <label for="encodedResult">Grid Coordinates:</label>
                            <textarea id="encodedResult" class="form-control" rows="4" readonly></textarea>
                        </div>
                        <button class="btn btn-success" onclick="copyEncodedResult()">üìã Copy Coordinates</button>
                    </div>
                `,
                decodeFields: `
                    <div class="form-group">
                        <label for="decodeCoordinates">Grid Coordinates:</label>
                        <textarea id="decodeCoordinates" class="form-control" rows="4" placeholder="Enter the coordinate pairs..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Grid Size:</label>
                        <select id="decodeGridSize" class="form-control">
                            <option value="5x5">5x5 Grid</option>
                            <option value="6x6">6x6 Grid</option>
                            <option value="8x8">8x8 Grid</option>
                        </select>
                    </div>
                    <div class="progress-bar" id="decodeProgress" style="display: none;">
                        <div class="progress-fill" id="decodeProgressFill"></div>
                    </div>
                    <div id="decodeStatus"></div>
                    <button class="btn btn-primary" onclick="decodeMessage()">üîì Decode Message</button>
                    <button class="btn btn-danger" onclick="clearDecode()">üóëÔ∏è Clear</button>
                    <div id="decodeResult" style="display: none;">
                        <h3>‚úÖ Message Decoded Successfully!</h3>
                        <div class="form-group">
                            <label for="decodedMessage">Original Message:</label>
                            <textarea id="decodedMessage" class="form-control" rows="4" readonly></textarea>
                        </div>
                        <button class="btn btn-success" onclick="copyDecodedMessage()">üìã Copy Message</button>
                    </div>
                `
            },
            tap: {
                title: "Tap Code",
                description: "Prison communication using tap patterns on surfaces",
                features: [
                    "Uses 5x5 grid of letters",
                    "Tap patterns for communication",
                    "Simple but effective method",
                    "Used in prisons and POW camps"
                ],
                encodeFields: `
                    <div class="form-group">
                        <label for="encodeMessage">Secret Message:</label>
                        <textarea id="encodeMessage" class="form-control" rows="4" placeholder="Enter your secret message here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Tap Code Grid:</label>
                        <div id="tapCodeDisplay" class="tap-code-display"></div>
                    </div>
                    <div class="progress-bar" id="encodeProgress" style="display: none;">
                        <div class="progress-fill" id="encodeProgressFill"></div>
                    </div>
                    <div id="encodeStatus"></div>
                    <button class="btn btn-primary" onclick="encodeMessage()">üîí Encode Message</button>
                    <button class="btn btn-danger" onclick="clearEncode()">üóëÔ∏è Clear</button>
                    <div id="encodeDownload" style="display: none;">
                        <h3>‚úÖ Message Encoded Successfully!</h3>
                        <div class="form-group">
                            <label for="encodedResult">Tap Pattern:</label>
                            <textarea id="encodedResult" class="form-control" rows="4" readonly></textarea>
                        </div>
                        <button class="btn btn-success" onclick="copyEncodedResult()">üìã Copy Pattern</button>
                    </div>
                `,
                decodeFields: `
                    <div class="form-group">
                        <label for="decodePattern">Tap Pattern:</label>
                        <textarea id="decodePattern" class="form-control" rows="4" placeholder="Enter the tap pattern (e.g., 2.3 1.1 3.4)..."></textarea>
                    </div>
                    <div class="progress-bar" id="decodeProgress" style="display: none;">
                        <div class="progress-fill" id="decodeProgressFill"></div>
                    </div>
                    <div id="decodeStatus"></div>
                    <button class="btn btn-primary" onclick="decodeMessage()">üîì Decode Message</button>
                    <button class="btn btn-danger" onclick="clearDecode()">üóëÔ∏è Clear</button>
                    <div id="decodeResult" style="display: none;">
                        <h3>‚úÖ Message Decoded Successfully!</h3>
                        <div class="form-group">
                            <label for="decodedMessage">Original Message:</label>
                            <textarea id="decodedMessage" class="form-control" rows="4" readonly></textarea>
                        </div>
                        <button class="btn btn-success" onclick="copyDecodedMessage()">üìã Copy Message</button>
                    </div>
                `
            }
        };

        // Initialize the tool
        document.addEventListener('DOMContentLoaded', function() {
            // Cipher selection
            document.querySelectorAll('.cipher-card').forEach(card => {
                card.addEventListener('click', function() {
                    const cipher = this.dataset.cipher;
                    selectCipher(cipher);
                });
            });

            // Default to Book Cipher
            selectCipher('book');
        });

        function selectCipher(cipher) {
            // Update active cipher card
            document.querySelectorAll('.cipher-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-cipher="${cipher}"]`).classList.add('active');

            currentCipher = cipher;
            
            // Show cipher info
            const info = cipherInfo[cipher];
            if (info) {
                document.getElementById('cipherInfoTitle').textContent = info.title;
                document.getElementById('cipherInfoContent').innerHTML = `
                    <p><strong>Description:</strong> ${info.description}</p>
                    <p><strong>Features:</strong></p>
                    <ul>
                        ${info.features.map(feature => `<li>${feature}</li>`).join('')}
                    </ul>
                `;
                document.getElementById('cipherInfo').style.display = 'block';
            }

            // Update encode/decode content
            updateContent();
        }

        function updateContent() {
            if (!currentCipher || !cipherInfo[currentCipher]) return;

            const info = cipherInfo[currentCipher];
            
            // Update encode content
            document.getElementById('encodeContent').innerHTML = info.encodeFields;
            
            // Update decode content
            document.getElementById('decodeContent').innerHTML = info.decodeFields;

            // Initialize cipher-specific UI elements
            initializeCipherUI();
        }

        function initializeCipherUI() {
            if (currentCipher === 'grid') {
                createGrid();
            } else if (currentCipher === 'tap') {
                createTapCodeGrid();
            }
        }

        function createGrid() {
            const gridDisplay = document.getElementById('gridDisplay');
            if (!gridDisplay) return;

            const size = document.getElementById('gridSize')?.value || '5x5';
            const [rows, cols] = size.split('x').map(Number);
            
            gridDisplay.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            gridDisplay.innerHTML = '';

            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.textContent = `${i+1},${j+1}`;
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.addEventListener('click', () => toggleGridCell(cell));
                    gridDisplay.appendChild(cell);
                }
            }
        }

        function createTapCodeGrid() {
            const tapDisplay = document.getElementById('tapCodeDisplay');
            if (!tapDisplay) return;

            tapDisplay.innerHTML = '';
            const letters = [
                ['A', 'B', 'C', 'D', 'E'],
                ['F', 'G', 'H', 'I', 'J'],
                ['K', 'L', 'M', 'N', 'O'],
                ['P', 'Q', 'R', 'S', 'T'],
                ['U', 'V', 'W', 'X', 'Y']
            ];

            letters.forEach((row, i) => {
                row.forEach((letter, j) => {
                    const cell = document.createElement('div');
                    cell.className = 'tap-cell';
                    cell.textContent = letter;
                    cell.dataset.row = i + 1;
                    cell.dataset.col = j + 1;
                    cell.addEventListener('click', () => selectTapCell(cell));
                    tapDisplay.appendChild(cell);
                });
            });
        }

        function toggleGridCell(cell) {
            cell.classList.toggle('selected');
        }

        function selectTapCell(cell) {
            document.querySelectorAll('.tap-cell').forEach(c => c.classList.remove('active'));
            cell.classList.add('active');
        }

        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to selected tab
            event.target.classList.add('active');

            currentTab = tabName;
        }

        function showStatus(elementId, message, type) {
            const statusDiv = document.getElementById(elementId);
            if (statusDiv) {
                statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            }
        }

        function updateProgress(progressId, fillId, percentage) {
            const progressBar = document.getElementById(progressId);
            const progressFill = document.getElementById(fillId);
            
            if (progressBar && progressFill) {
                progressBar.style.display = 'block';
                progressFill.style.width = percentage + '%';
            }
        }

        function hideProgress(progressId) {
            const progressBar = document.getElementById(progressId);
            if (progressBar) {
                progressBar.style.display = 'none';
            }
        }

        // Placeholder functions for encoding/decoding
        function encodeMessage() {
            if (!currentCipher) {
                showStatus('encodeStatus', '‚ùå Please select a cipher method', 'error');
                return;
            }

            showStatus('encodeStatus', 'üîÑ Processing...', 'info');
            updateProgress('encodeProgress', 'encodeProgressFill', 10);

            // Simulate processing
            setTimeout(() => {
                updateProgress('encodeProgress', 'encodeProgressFill', 100);
                hideProgress('encodeProgress');
                showStatus('encodeStatus', '‚úÖ Message encoded successfully!', 'success');
                document.getElementById('encodeDownload').style.display = 'block';
                
                // Generate sample encoded result
                const encodedResult = document.getElementById('encodedResult');
                if (encodedResult) {
                    if (currentCipher === 'book') {
                        encodedResult.value = '1.5.3 2.12.7 1.8.2 3.4.1 2.15.9';
                    } else if (currentCipher === 'grid') {
                        encodedResult.value = '1,1 2,3 1,5 3,2 2,4';
                    } else if (currentCipher === 'tap') {
                        encodedResult.value = '1.1 2.3 1.5 3.2 2.4';
                    }
                }
            }, 2000);
        }

        function decodeMessage() {
            if (!currentCipher) {
                showStatus('decodeStatus', '‚ùå Please select a cipher method', 'error');
                return;
            }

            showStatus('decodeStatus', 'üîÑ Processing...', 'info');
            updateProgress('decodeProgress', 'decodeProgressFill', 10);

            // Simulate processing
            setTimeout(() => {
                updateProgress('decodeProgress', 'decodeProgressFill', 100);
                hideProgress('decodeProgress');
                showStatus('decodeStatus', '‚úÖ Message decoded successfully!', 'success');
                document.getElementById('decodeResult').style.display = 'block';
                document.getElementById('decodedMessage').value = 'This is a sample decoded message. In the full implementation, this would contain the actual message extracted using the selected cipher method.';
            }, 2000);
        }

        function clearEncode() {
            // Clear encode form
            const encodeContent = document.getElementById('encodeContent');
            if (encodeContent) {
                encodeContent.innerHTML = cipherInfo[currentCipher]?.encodeFields || '';
            }
            document.getElementById('encodeDownload').style.display = 'none';
            hideProgress('encodeProgress');
            initializeCipherUI();
        }

        function clearDecode() {
            // Clear decode form
            const decodeContent = document.getElementById('decodeContent');
            if (decodeContent) {
                decodeContent.innerHTML = cipherInfo[currentCipher]?.decodeFields || '';
            }
            document.getElementById('decodeResult').style.display = 'none';
            hideProgress('decodeProgress');
        }

        function copyEncodedResult() {
            const encodedResult = document.getElementById('encodedResult');
            if (encodedResult) {
                encodedResult.select();
                document.execCommand('copy');
                alert('Encoded result copied to clipboard!');
            }
        }

        function copyDecodedMessage() {
            const decodedMessage = document.getElementById('decodedMessage');
            if (decodedMessage) {
                decodedMessage.select();
                document.execCommand('copy');
                alert('Decoded message copied to clipboard!');
            }
        }

        // Event listeners for dynamic elements
        document.addEventListener('change', function(e) {
            if (e.target.id === 'gridSize') {
                createGrid();
            }
        });
    </script>
</body>
</html>
